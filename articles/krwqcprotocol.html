<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KRW QC Protocol • KRWQCprotocol</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="KRW QC Protocol">
<meta property="og:description" content="KRWQCprotocol">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">KRWQCprotocol</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/krwqcprotocol.html">KRW QC Protocol</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="krwqcprotocol_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>KRW QC Protocol</h1>
                        <h4 data-toc-skip class="author">RIVM</h4>
            
            <h4 data-toc-skip class="date">2022-05-12</h4>
      
      
      <div class="hidden name"><code>krwqcprotocol.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">KRWQCprotocol</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: dplyr</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="co">#&gt; Loading required package: tidyr</span>
<span class="co">#&gt; Loading required package: lubridate</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'lubridate'</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date, intersect, setdiff, union</span>
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="co">#&gt; Loading required package: gridExtra</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'gridExtra'</span>
<span class="co">#&gt; The following object is masked from 'package:dplyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     combine</span>
<span class="co">#&gt; Loading required package: stringr</span></code></pre></div>
<div class="section level2">
<h2 id="inleiding">Inleiding<a class="anchor" aria-label="anchor" href="#inleiding"></a>
</h2>
<p>Deze handleiding beschrijft de validatie werkwijze volgens het QC protocol (REF RIVM/PMB) voor zowel de grondwaterdata uit het Landelijk Meetnet Grondwaterkwaliteit (LMG) als uit de Provinciale/KRW Monitoringprogramma’s (PMG/KMG). Met dit protocol wordt de dataverwerking en validatie geharmoniseerd en vastgesteld waardoor de datakwaliteit verbeterd. In dit kader is een R-pakket opgesteld om zoveel mogelijk te automatiseren. De hieruit voortkomende betrouwbare dataset is uiteindelijk van belang voor de vastlegging in de Basis Registratie Ondergrond (BRO).</p>
</div>
<div class="section level2">
<h2 id="qc-protocol">QC Protocol<a class="anchor" aria-label="anchor" href="#qc-protocol"></a>
</h2>
<p>Het protocol voor datakwaliteitscontrole (QC) beschrijft de werkwijze om grondwaterkwaliteitsgegevens te controleren en beoordelen. Dit protocol wordt door provincies en het RIVM gebruikt als bronhouders van de landelijke en provinciale grondwaterkwaliteitsdata. De bestaande werkwijze voor controle en beoordeling staat beschreven in het <code>Handboek Monitoring Grondwaterkwaliteit KRW (2013)</code>.</p>
<p>Deze werkwijze is ontwikkeld door het RIVM en vanaf de inrichting van het LMG gebruikt voor de kwaliteitscontrole. De kwaliteitscontrole (QC)-onderdelen in deze bestaande werkwijze zijn uitgebreid en in een aantal gevallen verder gespecifieerd. De verschillende QC-onderdelen in deze vernieuwde versie van het protocol zijn opgesteld volgens de structuur van het <code>Protocol voor datakwaliteitscontrole:</code> <code>kwaliteitsborging grondwaterstands- en stijghoogtegegevens</code>. Bij het opstellen van de nieuwe QC-onderdelen is samengewerkt tussen het RIVM en de provincies.</p>
</div>
<div class="section level2">
<h2 id="samenstelling-en-beschrijving-dataformat-voor-validatie">Samenstelling en beschrijving dataformat voor validatie<a class="anchor" aria-label="anchor" href="#samenstelling-en-beschrijving-dataformat-voor-validatie"></a>
</h2>
<p>In het QC protocol worden controles uitgevoerd m.b.t. parameters, meettechnieken, observaties en meetwaardes uit zowel het veld als uit het lab. Door de veelvoud aan controles is het complex om de vele gegevens in één bestand te vatten. Om deze reden is gekozen om de datastromen in 5 datasets op te knippen zodat het automatiseren van de controles eenvoudiger wordt. Alle records en kolomnamen zijn in lowercase. De datasets zijn als volgt:</p>
<ol style="list-style-type: decimal">
<li>Veldbestand: databestand met veldobservaties betreffende locatie en toestand van de put;</li>
<li>Putbestand: databestand met referentie putlocatie gegevens;</li>
<li>Filterbestand: databestand met referentie putfilter gegevens;</li>
<li>Parameterbestand: opzoekbestand voor parameter kenmerken;</li>
<li>Metingenbestand: bestand met gemeten parameters uit monsteranalyses en veldmetingen.</li>
</ol>
<p>Tabel 1 veldbestand (<code>d_veld</code>) bestaat uit:</p>
<table class="table">
<colgroup>
<col width="28%">
<col width="55%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>kolomnaam</th>
<th>inhoud</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>qcid</td>
<td>rijnummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>putcode</td>
<td>identificatie putlocatie volgens RGD/BRO?</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>filter</td>
<td>filternummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>jaar</td>
<td>jaar van veldbezoek</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>maand</td>
<td>maand van veldbezoek</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>dag</td>
<td>dag van veldbezoek</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>xcoord</td>
<td>x-coördinaat gemeten in het veld, in meters volgens RD</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>ycoord</td>
<td>y-coördinaat gemeten in het veld, in meters volgens RD</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>landgebruik</td>
<td>veldobservatie van dominant landgebruik putomgeving, volgens BRO</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>okf</td>
<td>diepte onderkant filter t.o.v. maaiveld, in meters</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>gws_voor</td>
<td>gemeten grondwaterstand voor bepomping filter t.o.v. maaiveld, in meters</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>gws_na</td>
<td>gemeten grondwaterstand na bepomping filter t.o.v. maaiveld, in meters</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>bem_app</td>
<td>gebruikt bemonsteringsapparaat</td>
<td>karakter</td>
</tr>
</tbody>
</table>
<p>Tabel 2 putbestand (<code>d_put</code>) bestaat uit:</p>
<table class="table">
<thead><tr class="header">
<th>kolomnaam</th>
<th>inhoud</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>qcid</td>
<td>rijnummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>putcode</td>
<td>identificatie putlocatie volgens BRO</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>rgdputnummer</td>
<td>identificatie putlocatie volgens RGD</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>xcoord</td>
<td>x-coördinaat zoals opgegeven in BRO, in meters volgens RD</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>ycoord</td>
<td>y-coördinaat zoals opgegeven in BRO, in meters volgens RD</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>landgebruik</td>
<td>(historisch) bepaald dominant landgebruik putomgeving</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>maaiveld</td>
<td>maaiveldhoogte bij de put, in meters NAP</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>provincie</td>
<td>provincie aanduiding of code van beheerder</td>
<td>karakter</td>
</tr>
</tbody>
</table>
<p>Tabel 3 filterbestand (<code>d_filter</code>) bestaat uit:</p>
<table class="table">
<colgroup>
<col width="28%">
<col width="55%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>kolomnaam</th>
<th>inhoud</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>qcid</td>
<td>rijnummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>putcode</td>
<td>identificatie putlocatie volgens BRO</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>filter</td>
<td>filternummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>bro_id</td>
<td>identificatie putfilter zoals opgenomen in BRO</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>diepte_onder</td>
<td>diepte onderkant filter t.o.v. maaiveld in meters</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>diepte_boven</td>
<td>diepte bovenkant filter t.o.v. maaiveld in meters</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>watertype</td>
<td>geeft aan of het grondwater zoet (&lt;300 mg/l Cl) of brak/zout is (&gt;= 300 mg/l Cl)</td>
<td></td>
</tr>
<tr class="even">
<td>redoxklasse</td>
<td>geeft aan welke redoxcondities in het putfilter gelden</td>
<td>karakter</td>
</tr>
</tbody>
</table>
<p>Tabel 4 parameterbestand (<code>d_parameter</code>) bestaat uit:</p>
<table class="table">
<colgroup>
<col width="28%">
<col width="55%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>kolomnaam</th>
<th>inhoud</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>qcid</td>
<td>rijnummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>parameter</td>
<td>stofnaam</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>aquocode</td>
<td>aquocode van de betreffende stof</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>cas</td>
<td>CAS-nummer van de betreffende stof</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>eenheid</td>
<td>eenheid van de betroffende stof</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>hoedanigheid</td>
<td>hoedanigheid waarin een stof is uitgedrukt</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>omschrijving</td>
<td>volledig uitgeschreven stofnaam. Kan overeenkomen met kolom naam</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>bem_apparaat</td>
<td>bemonsteringsapparaat waarmee een stof volgens de BRO dient te worden bemonsterd</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>bem_procedure</td>
<td>bemonsteringsprocedure procedure gehanteerd bij uitvoering grondwaterbemonstering</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>waarde_techniek</td>
<td>waardebepalingstechniek laboratoriumtechniek gebruikt bij bepaling chemische parameter</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>waarde_procedure</td>
<td>waardebepalingsprocedure voorschriften uitvoering laboratoriumonderzoek</td>
<td>karakter</td>
</tr>
</tbody>
</table>
<p>Tabel 5 metingenbestand (<code>d_metingen</code>) bestaat uit:</p>
<table class="table">
<colgroup>
<col width="28%">
<col width="55%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>kolomnaam</th>
<th>inhoud</th>
<th>type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>qcid</td>
<td>rijnummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>monsterID</td>
<td>unieke identificatiecode voor het genomen grondwatermonster</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>jaar</td>
<td>jaar van laboratorium of veldanalyse</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>maand</td>
<td>maand van laboratorium of veldanalyse</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>dag</td>
<td>dag van laboratorium of veldanalyse</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>putcode</td>
<td>identificatie putlocatie volgens BRO</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>filter</td>
<td>filternummer</td>
<td>numeriek</td>
</tr>
<tr class="even">
<td>parameter</td>
<td>naam van de gemeten parameter</td>
<td>karakter</td>
</tr>
<tr class="odd">
<td>detectieteken</td>
<td>geeft aan of een waarde onder de rapportagegrens ligt (&lt;) of erboven</td>
<td>karakter</td>
</tr>
<tr class="even">
<td>rapportagegrens</td>
<td>geeft de waarde van de rapportagegrens voor de betreffende paramter en monster</td>
<td>numeriek</td>
</tr>
<tr class="odd">
<td>waarde</td>
<td>de gemeten waarde, waarbij alle waardes positief dienen te zijn</td>
<td>numeriek</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="overzicht-van-de-data">Overzicht van de data<a class="anchor" aria-label="anchor" href="#overzicht-van-de-data"></a>
</h3>
<p>Dit pakket maakt gebruik van test data van het LMG die op bepaalde punten is aangepast om het gedrag van verschillende functies te controleren. Voorbeeld bestanden inladen:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">veld</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">put</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">metingen</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">filter</span><span class="op">)</span></code></pre></div>
<p>Overzicht tabel 1 met veldgegevens</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">veld</span><span class="op">)</span>
<span class="co">#&gt; tibble [2,025 × 14] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ qcid       : int [1:2025] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ putcode    : num [1:2025] 1 1 1 1 1 1 1 2 2 2 ...</span>
<span class="co">#&gt;  $ filter     : num [1:2025] 1 1 1 1 1 3 3 1 1 1 ...</span>
<span class="co">#&gt;  $ jaar       : num [1:2025] 2014 2015 2017 2018 2019 ...</span>
<span class="co">#&gt;  $ maand      : num [1:2025] 3 5 5 4 4 3 5 4 6 8 ...</span>
<span class="co">#&gt;  $ dag        : num [1:2025] 31 4 2 10 15 31 2 9 3 30 ...</span>
<span class="co">#&gt;  $ xcoord     : num [1:2025] 211635 211635 211635 211635 211635 ...</span>
<span class="co">#&gt;  $ ycoord     : num [1:2025] 467710 467710 467710 467710 467710 ...</span>
<span class="co">#&gt;  $ landgebruik: chr [1:2025] "bos, natuur en water" "bos, natuur en water" "bos, natuur en water" "bos, natuur en water" ...</span>
<span class="co">#&gt;  $ okf        : num [1:2025] 10.6 10.6 10.6 10.6 10.6 25 25 10 10 10 ...</span>
<span class="co">#&gt;  $ gws_voor   : num [1:2025] 1.73 1.3 0.84 1.81 0.8 1.47 1.5 1.68 0.86 1.05 ...</span>
<span class="co">#&gt;  $ gws_na     : num [1:2025] 2 0.9 1.97 0.8 1.8 1.9 1.06 1.26 0.82 1.31 ...</span>
<span class="co">#&gt;  $ bem_proc   : chr [1:2025] "NEN9644" "SIKBProtocol2002vanafV4" "NEN1176" "NEN1176" ...</span>
<span class="co">#&gt;  $ bem_app    : chr [1:2025] "peristaltischePomp" "" "slurf" "onderwaterpomp" ...</span>
<span class="co">#&gt;  - attr(*, "problems")= tibble [595 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;   ..$ row     : int [1:595] 1289 1290 1292 1397 1398 1408 1409 1427 1427 1427 ...</span>
<span class="co">#&gt;   ..$ col     : chr [1:595] "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_BA" ...</span>
<span class="co">#&gt;   ..$ expected: chr [1:595] "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" ...</span>
<span class="co">#&gt;   ..$ actual  : chr [1:595] "&lt;" "&lt;" "&lt;" "&lt;" ...</span>
<span class="co">#&gt;   ..$ file    : chr [1:595] "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">veld</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 14</span></span>
<span class="co">#&gt;    qcid putcode filter  jaar maand   dag xcoord ycoord landgebruik           okf</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1       1      1  <span style="text-decoration: underline;">2</span>014     3    31 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  10.6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2       1      1  <span style="text-decoration: underline;">2</span>015     5     4 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  10.6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3       1      1  <span style="text-decoration: underline;">2</span>017     5     2 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  10.6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4       1      1  <span style="text-decoration: underline;">2</span>018     4    10 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  10.6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5       1      1  <span style="text-decoration: underline;">2</span>019     4    15 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  10.6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6       1      3  <span style="text-decoration: underline;">2</span>014     3    31 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wat…  25  </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 4 more variables: gws_voor &lt;dbl&gt;, gws_na &lt;dbl&gt;, bem_proc &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   bem_app &lt;chr&gt;</span></span></code></pre></div>
<p>Overzicht tabel 2 met put informatie</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">put</span><span class="op">)</span>
<span class="co">#&gt; tibble [340 × 8] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ qcid        : int [1:340] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ putcode     : num [1:340] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ rgdputnummer: num [1:340] 108 109 91 196 258 69 70 71 200 74 ...</span>
<span class="co">#&gt;  $ xcoord      : num [1:340] 211635 216255 223125 211975 218750 ...</span>
<span class="co">#&gt;  $ ycoord      : num [1:340] 467710 470435 470025 461935 449190 ...</span>
<span class="co">#&gt;  $ landgebruik : chr [1:340] "bos, natuur en water" "grasland" "bos, natuur en water" "grasland" ...</span>
<span class="co">#&gt;  $ maaiveld    : num [1:340] 8 9 12 8 15 7 13 17 20 18 ...</span>
<span class="co">#&gt;  $ provincie   : chr [1:340] "GLD" "GLD" "GLD" "GLD" ...</span>
<span class="co">#&gt;  - attr(*, "problems")= tibble [595 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;   ..$ row     : int [1:595] 1289 1290 1292 1397 1398 1408 1409 1427 1427 1427 ...</span>
<span class="co">#&gt;   ..$ col     : chr [1:595] "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_BA" ...</span>
<span class="co">#&gt;   ..$ expected: chr [1:595] "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" ...</span>
<span class="co">#&gt;   ..$ actual  : chr [1:595] "&lt;" "&lt;" "&lt;" "&lt;" ...</span>
<span class="co">#&gt;   ..$ file    : chr [1:595] "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">put</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span>
<span class="co">#&gt;    qcid putcode rgdputnummer xcoord ycoord landgebruik        maaiveld provincie</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1       1          108 <span style="text-decoration: underline;">211</span>635 <span style="text-decoration: underline;">467</span>710 bos, natuur en wa…        8 GLD      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2       2          109 <span style="text-decoration: underline;">216</span>255 <span style="text-decoration: underline;">470</span>435 grasland                  9 GLD      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3       3           91 <span style="text-decoration: underline;">223</span>125 <span style="text-decoration: underline;">470</span>025 bos, natuur en wa…       12 GLD      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4       4          196 <span style="text-decoration: underline;">211</span>975 <span style="text-decoration: underline;">461</span>935 grasland                  8 GLD      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5       5          258 <span style="text-decoration: underline;">218</span>750 <span style="text-decoration: underline;">449</span>190 akkerbouw                15 GLD      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6       6           69 <span style="text-decoration: underline;">222</span>795 <span style="text-decoration: underline;">450</span>795 bos, natuur en wa…        7 GLD</span></code></pre></div>
<p>Overzicht tabel 3 met putfilter informatie</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">filter</span><span class="op">)</span>
<span class="co">#&gt; tibble [345 × 8] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ qcid        : int [1:345] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ putcode     : num [1:345] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ filter      : num [1:345] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ bro_id      : chr [1:345] "108-1" "109-1" "91-1" "196-1" ...</span>
<span class="co">#&gt;  $ diepte_onder: num [1:345] 10.6 10 9.85 9.55 9.9 ...</span>
<span class="co">#&gt;  $ diepte_boven: num [1:345] 8.6 8 7.85 7.55 7.9 7.95 8 9.9 8.45 7.95 ...</span>
<span class="co">#&gt;  $ watertype   : chr [1:345] "zoet" "zoet" "zoet" "zoet" ...</span>
<span class="co">#&gt;  $ redoxklasse : chr [1:345] "ferm" "fean" "fean" "ferm" ...</span>
<span class="co">#&gt;  - attr(*, "problems")= tibble [595 × 5] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;   ..$ row     : int [1:595] 1289 1290 1292 1397 1398 1408 1409 1427 1427 1427 ...</span>
<span class="co">#&gt;   ..$ col     : chr [1:595] "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_CA" "DETECTIETEKEN_BA" ...</span>
<span class="co">#&gt;   ..$ expected: chr [1:595] "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" "1/0/T/F/TRUE/FALSE" ...</span>
<span class="co">#&gt;   ..$ actual  : chr [1:595] "&lt;" "&lt;" "&lt;" "&lt;" ...</span>
<span class="co">#&gt;   ..$ file    : chr [1:595] "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" "'./brondata//LMG_2014ev.csv'" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">filter</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span>
<span class="co">#&gt;    qcid putcode filter bro_id diepte_onder diepte_boven watertype redoxklasse</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1       1      1 108-1         10.6          8.6  zoet      ferm       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2       2      1 109-1         10            8    zoet      fean       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3       3      1 91-1           9.85         7.85 zoet      fean       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4       4      1 196-1          9.55         7.55 zoet      ferm       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5       5      1 258-1          9.9          7.9  zoet      so4r       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6       6      1 69-1           9.95         7.95 zoet      ferm</span></code></pre></div>
<p>Overzicht tabel 4 met parameter informatie</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">parameter</span><span class="op">)</span>
<span class="co">#&gt; tibble [61 × 10] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ qcid            : int [1:61] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ parameter       : chr [1:61] "Al" "As" "Ba" "Ca" ...</span>
<span class="co">#&gt;  $ omschrijving    : chr [1:61] "aluminium" "arseen" "barium" "calcium" ...</span>
<span class="co">#&gt;  $ aquocode        : chr [1:61] "Al" "As" "Ba" "Ca" ...</span>
<span class="co">#&gt;  $ cas             : chr [1:61] "7429-90-5" "7440-38-2" "7440-39-3" "7440-70-2" ...</span>
<span class="co">#&gt;  $ eenheid         : chr [1:61] "ug/l" "ug/l" "ug/l" "mg/l" ...</span>
<span class="co">#&gt;  $ bem_apparaat    : chr [1:61] "Harolina" "visisonor" "Baliset" "Holophonor" ...</span>
<span class="co">#&gt;  $ bem_procedure   : chr [1:61] "NEN 4976" "NEN 1534" "NEN 5330" "NEN 4029" ...</span>
<span class="co">#&gt;  $ waarde_techniek : chr [1:61] "" "GC-ECD" "MICCOUL" "GC-MS-PT" ...</span>
<span class="co">#&gt;  $ waarde_procedure: chr [1:61] "N6964+C1.06" "P6266.91" "I12846.12" "D38407-30.07" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">parameter</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span>
<span class="co">#&gt;    qcid parameter omschrijving aquocode cas   eenheid bem_apparaat bem_procedure</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 Al        aluminium    Al       7429… ug/l    Harolina     NEN 4976     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 As        arseen       As       7440… ug/l    visisonor    NEN 1534     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3 Ba        barium       Ba       7440… ug/l    Baliset      NEN 5330     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4 Ca        calcium      Ca       7440… mg/l    Holophonor   NEN 4029     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5 Cd        cadmium      Cd       7440… ug/l    Harolina     NEN 1419     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6 Cl        chloride     Cl       1688… mg/l    Holophonor   NEN 1605     </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: waarde_techniek &lt;chr&gt;, waarde_procedure &lt;chr&gt;</span></span></code></pre></div>
<p>Overzicht tabel 5 met meetwaardes</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">metingen</span><span class="op">)</span>
<span class="co">#&gt; tibble [126,880 × 11] (S3: tbl_df/tbl/data.frame)</span>
<span class="co">#&gt;  $ qcid           : int [1:126880] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ monsterid      : int [1:126880] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ jaar           : num [1:126880] 2014 2014 2014 2014 2014 ...</span>
<span class="co">#&gt;  $ maand          : num [1:126880] 3 3 3 3 3 3 3 3 3 3 ...</span>
<span class="co">#&gt;  $ dag            : num [1:126880] 31 31 31 31 31 31 31 31 31 31 ...</span>
<span class="co">#&gt;  $ filter         : num [1:126880] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ putcode        : num [1:126880] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ detectieteken  : chr [1:126880] "" "" "" "" ...</span>
<span class="co">#&gt;  $ rapportagegrens: num [1:126880] NA NA NA NA 0.05 NA NA NA 0.5 NA ...</span>
<span class="co">#&gt;  $ waarde         : num [1:126880] 10 0.6 39 97.65 0.05 ...</span>
<span class="co">#&gt;  $ parameter      : chr [1:126880] "Al" "As" "Ba" "Ca" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">metingen</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span>
<span class="co">#&gt;    qcid monsterid  jaar maand   dag filter putcode detectieteken rapportagegrens</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">""</span>                      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">""</span>                      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">""</span>                      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">""</span>                      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">"</span>&lt;<span style="color: #949494;">"</span>                      0.05</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6         1  <span style="text-decoration: underline;">2</span>014     3    31      1       1 <span style="color: #949494;">""</span>                      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: waarde &lt;dbl&gt;, parameter &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="installatie-krwqcprotocol-r-pakket">Installatie KRWQCprotocol R-pakket<a class="anchor" aria-label="anchor" href="#installatie-krwqcprotocol-r-pakket"></a>
</h2>
<p>Het KRWQCprotocol wordt beschikbaar gesteld als R pakket. Gebruikers kunnen de functies uit dit pakket gebruiken in hun eigen scripts. Om het pakket te installeren moet vanuit R het volgende commando uitgevoerd worden:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"jspijker/KRWQCprotocol"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="werking-krwqcprotocol-r-pakket">Werking KRWQCprotocol R-pakket<a class="anchor" aria-label="anchor" href="#werking-krwqcprotocol-r-pakket"></a>
</h2>
<p>De verschillende QC stappen uit het Protocol kunnen eenvoudig uitgevoerd worden door het aanroepen van de relevante functie (QC0a-QC5). Als invoer van de functie worden de relevante datatabellen meegegeven benodigd voor de testen. In de functie kan met het verbose argument opgegeven worden of de print van tussentijdse output gewenst is door deze op <code>TRUE</code> te zetten. In een aantal gevallen dienen extra invoervariabelen opgegeven te worden. Zie hiervoor de documentatie bij de functies, bijvoorbeeld <code><a href="../reference/QC0a.html">?KRWQCprotocol::QC0a</a></code>.</p>
<p>In de verschillende QC functies worden de testen uitgevoerd beschreven in het QC Protocol. Als bij deze stappen een afwijking geconstateerd wordt dan krijgt het monster, de parameter of de waarde een concept oordeel toegekend. Deze afwijkingen worden aan het eind van de functie als attribuut meegegeven aan het metingen bestand (<code>d_metingen</code>) en kunnen dus na het runnen van elke test bekeken worden.</p>
<p><em>BELANGRIJK:</em> alle resultaten en concept oordelen worden per QC-test als attribuut aan het metingenbestand gehangen. Het is daarom noodzakelijk om voor elke test hetzelfde bestand als invoer te gebruiken, zodat alle test resultaten uiteindelijk als attribuut beschikbaar zijn onder eenzelfde bestand.</p>
</div>
<div class="section level2">
<h2 id="toepassing-functies">Toepassing functies<a class="anchor" aria-label="anchor" href="#toepassing-functies"></a>
</h2>
<p>Hieronder zullen de QC stappen 0-5 kort doorlopen worden om te laten zien hoe de functies toegepast worden en of aanvullende acties benodigd zijn.</p>
<p>Bij een viertal QC stappen moet de validatie door de grondwaterbeheerder zelf worden uitgevoerd. Het gaat om de stappen QC0c, QC0d, QC2b en QC2c. Om deze stappen in het R-pakket op te kunnen nemen moet voor deze functies eerst een invoerbestand gegenereerd worden met <code>QC0c_create_file</code>, idem voor de overige 3 functies. Na het invullen van deze bestanden dient het bestand onder dezelfde naam opgeslagen te worden zodat deze meegenomen kan worden in de functies QC0c, QC0d, QC2b en QC2c uit dit pakket. De resultaten worden net als bij de andere functies vervolgens als attribute toegekend aan het metingen bestand.</p>
<div class="section level3">
<h3 id="qc0---meetopstelling">QC0 - Meetopstelling<a class="anchor" aria-label="anchor" href="#qc0---meetopstelling"></a>
</h3>
<p>De stappen en functies onder QC0 worden op reguliere wijze uitgevoerd door het aanroepen van de betreffende functie en benodigde datasets, met uitzondering van QC0c en QC0d zie bovenstaande.</p>
<p>Voorbeeld voor uitvoeren van QC0a:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">metingen</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC0a.html">QC0a</a></span><span class="op">(</span>d_veld <span class="op">=</span> <span class="va">veld</span>, d_put <span class="op">=</span> <span class="va">put</span>, d_metingen <span class="op">=</span> <span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; "Er zijn in totaal 10 bemonsterde putlocaties met XY-coordinaten afwijkend van de BRO geregistreerde putcoordinaten."</span>
<span class="co">#&gt;    putcode  X_val  Y_val  X_BRO  Y_BRO</span>
<span class="co">#&gt; 1       21 226390 567500 226350 567500</span>
<span class="co">#&gt; 2       28 212490 546675 212450 546675</span>
<span class="co">#&gt; 3       78  68760 417805  68720 417805</span>
<span class="co">#&gt; 4       93  85200 446927  85200 446970</span>
<span class="co">#&gt; 5       94 133875 407482 133875 407525</span>
<span class="co">#&gt; 6      183 164930 585020 164890 585020</span>
<span class="co">#&gt; 7      183 164890 584977 164890 585020</span>
<span class="co">#&gt; 8      206 233340 500225 233300 500225</span>
<span class="co">#&gt; 9      272 193288 435470 193288 435513</span>
<span class="co">#&gt; 10     283 125350 521257 125350 521300</span></code></pre></div>
<p>In het voorbeeld veld data van het LMG zit als test het landgebruik heide. Dit zorgt voor een error in QC0b:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC0b.html">QC0b</a></span><span class="op">(</span>d_veld <span class="op">=</span> <span class="va">veld</span>, d_put <span class="op">=</span> <span class="va">put</span>, d_metingen <span class="op">=</span> <span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; Error in QC0b(d_veld = veld, d_put = put, d_metingen = x, verbose = TRUE) : </span>
<span class="co">#&gt;   Landgebruiksklasse worden niet herkend, zie valideLandgebruiken()</span></code></pre></div>
<p>Heide is niet opgenomen in de valide landgebruiken en kan daardoor niet worden meegenomen in test QC0b. Voorbeeld voor uitvoeren van QC0b:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">veld</span> <span class="op">&lt;-</span> <span class="va">veld</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">landgebruik</span> <span class="op">!=</span> <span class="st">"heide"</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC0b.html">QC0b</a></span><span class="op">(</span>d_veld <span class="op">=</span> <span class="va">veld</span>, d_put <span class="op">=</span> <span class="va">put</span>, d_metingen <span class="op">=</span> <span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; [1] "Voor elke putfilter is het landgebruik identiek aan de BRO geregistreerde informatie"</span></code></pre></div>
<p>Voorbeeld voor uitvoeren van QC0c:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/QC0c_create_file.html">QC0c_create_file</a></span><span class="op">(</span><span class="st">"created_files"</span><span class="op">)</span> <span class="co"># -&gt; handmatig invullen en met dezelfde naam opslaan</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC0c.html">QC0c</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="st">"created_files"</span>, d_metingen <span class="op">=</span> <span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="qc1---data-integriteit">QC1 - Data-integriteit<a class="anchor" aria-label="anchor" href="#qc1---data-integriteit"></a>
</h3>
<p>In QC1a wordt de informatie uit de parameter tabel (d_parameter) vergeleken met informatie uit de BRO. Binnen het pakket is de meest recente versie van deze BRO parameterlijst opgenomen en deze wordt binnen de functie aangeroepen. In QC1b worden de bemonsteringsapparatuur en -procedure en de analysetechniek en -procedure getoetst aan de gegevens uit de BRO. Indien het vermoeden bestaat dat de BRO gegevens in dit pakket achterhaald zijn wordt verzocht een issue aan te maken op de Github pagina van dit QC pakket zodat de meest actuele gegevens beschikbaar kunnen worden gesteld.</p>
<p>QC1d (controle conformiteit BRO format) uit het Protocol wordt niet in dit R-pakket als afzonderlijke functie getoetst. In iedere functie wordt namelijk al getest of de benodigde datakolommen aanwezig zijn.</p>
<p>De andere testen uit QC1 worden op reguliere wijze uitgevoerd, zie voorbeeld van QC0a.</p>
</div>
<div class="section level3">
<h3 id="qc2---bemonstering">QC2 - Bemonstering<a class="anchor" aria-label="anchor" href="#qc2---bemonstering"></a>
</h3>
<p>De stappen en functies onder QC2 worden op reguliere wijze uitgevoerd door het aanroepen van de betreffende functie en benodigde datasets, met uitzondering van QC2b en QC2c, zie eerder.</p>
</div>
<div class="section level3">
<h3 id="qc3---plausibiliteit">QC3 - Plausibiliteit<a class="anchor" aria-label="anchor" href="#qc3---plausibiliteit"></a>
</h3>
<p>In QC3b wordt getoetst of de putten in de BRO puttenlijst voorkomen. De bedoeling is om d.m.v. een API de puttenlijst uit de BRO automatisch in te laden. Door technische problemen is dit momenteel nog niet mogelijk. Hierdoor is voor QC3b nu een tijdelijke functie opgenomen. Bij deze functie is het op het moment noodzakelijk om handmatig de putten uit het metingen bestand te selecteren welke niet in de BRO voorkomen en de subselectie uit het metingen bestand in te voeren in de functie.</p>
<p>In QC3c wordt de ionenbalans opgesteld. Het is hierdoor belangrijk om de benodigde parameters de juiste naam te geven. In alle QC’s wordt er van uitgegaan dat lab parameters genoteerd zijn als aquoqode (zoals in het parameter bestand beschreven). Daarnaast wordt van het volgende uitgegaan:</p>
<ul>
<li><p>In het geval dat de hco3 in het lab is bepaald (zoals in de provinciale set), wordt de lab waarde gebruikt. Dit betekent dat ook pH uit het lab gebruikt moet worden. De standaard waardes voor ph_naam en hco3_naam worden dan gebruikt.</p></li>
<li><p>In het geval de hco3 in het veld is bepaald (zoals in de LMG set), worden veld waardes gebruikt. In dit geval moet de ph_naam en hco3_naam wel worden gespecificeerd.</p></li>
</ul>
<p>Met het voorbeeld metingen bestand uit het LMG wordt QC3c op de volgende manier uitgevoerd:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC3c.html">QC3c</a></span><span class="op">(</span>d_metingen <span class="op">=</span> <span class="va">x</span>, ph_naam <span class="op">=</span> <span class="st">"h_5__veld"</span>, hco3_naam <span class="op">=</span> <span class="st">"hco3_veld"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>In QC3d worden de ec lab en ec veld vergeleken. Benodigde parameternamen zijn “GELDHD” en <code>geleidendheid_veld_naam</code>. In alle QC’s wordt er van uitgegaan dat lab parameters genoteerd zijn als aquoqode (zoals in parameter bestand) dus in dit geval “GELDHD”.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC3d.html">QC3d</a></span><span class="op">(</span>d_metingen <span class="op">=</span> <span class="va">x</span>, d_parameter <span class="op">=</span> <span class="va">parameter</span>, geleidendheid_veld_naam <span class="op">=</span> <span class="st">"ec_5__veld"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>In QC3e wordt de ec berekend aan de hand van de gemeten concentraties. De berekende EC wordt vergeleken met de gemeten EC. Met functie argument <code>add_phosphate</code> kan aangegeven worden of het gewenst is dat PO4 uit ptot wordt berekend indien po4 niet bekend is. Binnen deze functie wordt de ionenbalans opnieuw opgesteld zodat HCO3 geschat kan worden als deze ontbreekt met <code>add_bicarbonate</code>. Vervolgens wordt aan de hand van bepaalde condities bepaald welke methode gebruikt wordt om de EC te berekenen om deze uiteindelijk toe te passen. Net zoals bij QC3c hoeven de variabelen ph_naam, hco3_naam en ec_naam alleen te worden gespecificeerd als niet de standaard lab waardes (in aquocodes) worden gebruikt.</p>
<p>In QC3f wordt de pH lab met pH veld vergeleken. Benodigde parameternamen zijn “pH” en <code>ph_veld_naam</code>. In alle QC’s wordt er van uitgegaan dat lab parameters genoteerd zijn als aquoqode (zoals in parameter bestand) dus in dit geval “pH”.</p>
<p>In QC3g wordt de pH met hco3 vergeleken. Aangezien in de meeste gevallen hco3 niet in het veld is bepaald voor de provinciale gegevens, worden nu de lab metingen van beiden vergeleken. Benodigde parameternamen zijn “pH” en “HCO3”.</p>
<p>In QC3h wordt no3 met nh4 vergeleken. Benodigde parameternamen zijn “NO3” en “NH4”.</p>
</div>
<div class="section level3">
<h3 id="qc4---consistentie">QC4 - Consistentie<a class="anchor" aria-label="anchor" href="#qc4---consistentie"></a>
</h3>
<p>In QC4a worden de metingen uit de te valideren meetronde gecontroleerd of deze consistent zijn met de historische meetreeks. Metingen welke &gt;3.5 sd afwijken worden als afwijkend en twijfelachtig bestempeld. Wanneer een reeks minder dan 3 metingen heeft is de test niet uitvoerbaar. Vervolgens worden op 2 manieren figuren gegenereerd en weggeschreven als attribute aan het metingen bestand om de validatie te kunnen uitvoeren:</p>
<ul>
<li>Voor elke parameter worden de metingen log-getransformeerd weergegeven waar afijkende metingen uit de te valideren meetronde gekleurd zijn afgebeeld. Hiermee wordt in één opslag duidelijk hoeveel metingen per parameter afwijken en of er eventueel sprake is van eenheidsfouten of structurele afwijkingen in een meetronde.</li>
<li>Per twijfelachtige meting wordt de gehele reeks geplot tegelijkertijd met eventuele andere putfilters op die locatie. Zo kunnen mogelijke filterwisselingen geidentificeerd worden.</li>
</ul>
<p>Voorbeeld voor het maken van een pdf met de afbeeldingen van de parameters:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC4a.html">QC4a</a></span><span class="op">(</span>d_metingen <span class="op">=</span> <span class="va">x</span>, d_parameter <span class="op">=</span> <span class="va">parameter</span><span class="op">)</span>

<span class="va">x_attr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"qcout"</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span>
  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/parameters_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">".pdf"</span><span class="op">)</span>,
  plot <span class="op">=</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">marrangeGrob</a></span><span class="op">(</span><span class="va">x_attr</span><span class="op">$</span><span class="va">QC4a</span><span class="op">$</span><span class="va">resultaat</span><span class="op">$</span><span class="va">plot_param</span>, nrow <span class="op">=</span> <span class="fl">1</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
  width <span class="op">=</span> <span class="fl">15</span>, height <span class="op">=</span> <span class="fl">9</span>
<span class="op">)</span></code></pre></div>
<p>QC4b wordt regulier uitgevoerd met het aanroepen van QC4b() met metingen data uit het LMG als voorbeeld. Bij deze stap word getest of de pH van het veld en de pH van het lab niet buiten het meetbereik liggen. De benodigde naam voor pH lab is “pH”. De benodigde naam voor pH veld staat standaard op “pH_veld”, maar kan worden aangepast door een character string in te vullen voor ph_veld_naam. In het geval van het voorbeeld metingen data uit het LMG wordt QC4b op de volgende manier uitgevoerd:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC4b.html">QC4b</a></span><span class="op">(</span>d_metingen <span class="op">=</span> <span class="va">x</span>, ph_veld_naam <span class="op">=</span> <span class="st">"h_5__veld"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="qc5---qc-status">QC5 - QC Status<a class="anchor" aria-label="anchor" href="#qc5---qc-status"></a>
</h3>
<p>In de functie voor QC5 worden de attributes met resultaten van de verschillende tests uit het metingen bestand gehaald en bij elkaar gevoegd als één dataframe met <code><a href="../reference/collect_result.html">collect_result()</a></code>. Het is hierbij belangrijk dat alle minimaal benodigde QC-stappen (QC0a, QC0c t/m QC0e, QC1f, QC2a t/m QC2c, QC3c t/m QC3h“,”QC4a" en “QC4b”) zijn doorlopen en dat voor iedere functie hetzelfde metingen bestand als invoer is gebruikt. In dit geval zijn de resultaten uit de verschillende QC tests als attribute aan één bestand gekoppeld. Met het verkregen dataframe uit <code><a href="../reference/collect_result.html">collect_result()</a></code> wordt vervolgens per meting het eindoordeel bepaald volgens de regels uit het QC Protocol.</p>
<p>De overige qc test zijn benodigd voor het volledig doorlopen van het KRWQC protocol, maar het ontbreken ervan is geen technische belemmering voor het uitvoeren van QC5.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">oordeel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QC5.html">QC5</a></span><span class="op">(</span>d_metingen <span class="op">=</span> <span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">oordeel</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Job Spijker.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
